import{b as k}from"./chunk-EO2ZYVW3.js";import{a as c,b as a}from"./chunk-MUSGDK5O.js";import"./chunk-6EW4IUTA.js";import{i as x}from"./chunk-SPF45QKE.js";import"./chunk-Y5TDRMM2.js";import"./chunk-TU2ZNCML.js";import{a as R,c as _}from"./chunk-63TX3NUI.js";import"./chunk-ZOPMU54Y.js";import{l as F}from"./chunk-KALLYKT4.js";import{$b as S,Ab as m,Jb as f,Qb as v,Rb as g,Sb as y,Ub as w,Za as p,_a as l,ac as b,gc as C,hc as P,la as o,oa as u,pb as h,yb as n,zb as r}from"./chunk-MLHGNWXV.js";var B=(()=>{class s{constructor(i){this.authService=o(k),this.toastService=o(x),this.router=o(_),this.route=o(R),this.token="",this.questions$=i.getChangePasswordQuestions()}ngOnInit(){this.authService.isAuthenticatedUser()?this.router.navigate(["/dashboard"]):this.route.paramMap.subscribe(e=>{this.token=e.get("token")??"",this.token||(this.toastService.error("Reset token not found"),this.router.navigate(["/"]))})}handleFormSubmit(i){let e={password:i.formData.password,token:this.token};this.authService.resetPassword(e).subscribe({next:t=>{console.log(t),this.toastService.success("Password changed successfully!"),this.dynamicFormComponent.resetForm(),this.router.navigate(["/"])},error:t=>{console.log(t)}})}static{this.\u0275fac=function(e){return new(e||s)(l(a))}}static{this.\u0275cmp=u({type:s,selectors:[["app-reset-password"]],viewQuery:function(e,t){if(e&1&&v(c,5),e&2){let d;g(d=y())&&(t.dynamicFormComponent=d.first)}},standalone:!0,features:[S([a]),b],decls:14,vars:4,consts:[[1,"container","min-vh-100","py-5"],[1,"row"],[1,"col-lg-10","mx-auto"],[1,"card","main-card"],[1,"card-body"],[1,"col-lg-6","d-flex","align-items-center","justify-content-center"],["src","../../../../assets/synchronize.png","alt","key image","width","150","data-aos","fade-down","data-aos-duration","2000",1,"img-fluid"],[1,"col-lg-6"],["data-aos","fade-down","data-aos-duration","2000",1,"text-start"],["data-aos","fade-right","data-aos-duration","2000",1,"custom-hr"],[3,"submitEvent","questions","btnText"]],template:function(e,t){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",1)(6,"div",5),m(7,"img",6),r(),n(8,"div",7)(9,"h3",8),w(10," Reset Password "),r(),m(11,"hr",9),n(12,"app-dynamic-form",10),C(13,"async"),f("submitEvent",function(Q){return t.handleFormSubmit(Q)}),r()()()()()()()()),e&2&&(p(12),h("questions",P(13,2,t.questions$))("btnText","Change Password"))},dependencies:[F,c]})}}return s})();export{B as ResetPasswordComponent};
