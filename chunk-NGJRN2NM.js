import{a as O}from"./chunk-QWHTR2E5.js";import{a as l,b as m}from"./chunk-OQEK375C.js";import{d as D,k as P,l as A,p as F,y as E}from"./chunk-FT6CM3TU.js";import{Ab as w,Bb as C,Db as _,Eb as x,Ma as g,Na as p,_ as a,ba as u,cb as f,e as M,kb as n,lb as r,mb as h,rb as v,ub as b,vb as y,wb as S,xb as s}from"./chunk-I5PQAQ5I.js";var Q=M(O());var V=(()=>{let o=class o{constructor(e){this.authService=a(F),this.toastService=a(E),this.router=a(P),this.questions$=e.getRegistrationQuestions()}ngOnInit(){Q.default.init(),this.authService.isAuthenticatedUser()&&this.router.navigate(["/"])}handleFormSubmit(e){console.log("Form submitted:",e.formData);let t={first_name:e.formData.firstName,last_name:e.formData.lastName,email:e.formData.emailAddress,username:e.formData.emailAddress,password:e.formData.password};e.formData.password===e.formData.confirmPassword?this.authService.register(t).subscribe({next:i=>{console.log(i),i.status&&(this.dynamicFormComponent.resetForm(),this.toastService.success("Registration is successful","Account Created"),this.authService.login(t).subscribe({}))},error:i=>{console.log(i)}}):this.toastService.error("Passwords does not match","Cannot Submit")}};o.\u0275fac=function(t){return new(t||o)(p(m))},o.\u0275cmp=u({type:o,selectors:[["app-register"]],viewQuery:function(t,i){if(t&1&&b(l,5),t&2){let c;y(c=S())&&(i.dynamicFormComponent=c.first)}},standalone:!0,features:[w([m]),C],decls:21,vars:5,consts:[[1,"container","min-vh-100","ps-md-0","py-5"],[1,"row","g-0"],[1,"col-md-4","col-lg-6"],[1,"login","d-flex","align-items-center","py-5"],[1,"container"],[1,"row"],[1,"col-md-9","col-lg-8","mx-auto"],["data-aos","fade-right","data-aos-duration","2000",1,"login-heading","mb-4"],["routerLink","/auth/login","data-aos","fade-right","data-aos-duration","2000",1,"btn","btn-outline-dark","btn-lg"],[1,"col-md-8","col-lg-6","login-col"],["data-aos","fade-down","data-aos-duration","2000",1,"login-heading","mb-4"],["data-aos","fade-right","data-aos-duration","2000",1,"custom-hr"],[3,"submitEvent","questions","btnText","perPage"]],template:function(t,i){t&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h3",7),s(8," Already have an Account? "),r(),n(9,"a",8),s(10,"Sign In Now"),r()()()()()(),n(11,"div",9)(12,"div",3)(13,"div",4)(14,"div",5)(15,"div",6)(16,"h3",10),s(17," Create new Account "),r(),h(18,"hr",11),n(19,"app-dynamic-form",12),_(20,"async"),v("submitEvent",function(R){return i.handleFormSubmit(R)}),r()()()()()()()()),t&2&&(g(19),f("questions",x(20,3,i.questions$))("btnText","Register")("perPage",4))},dependencies:[A,D,l],styles:[".login[_ngcontent-%COMP%]{min-height:100vh}.bg-image[_ngcontent-%COMP%]{background-image:url(https://source.unsplash.com/WEQbe2jBg40/600x1200);background-size:cover;background-position:center}.login-heading[_ngcontent-%COMP%]{font-weight:300}.btn-login[_ngcontent-%COMP%]{font-size:.9rem;letter-spacing:.05rem;padding:.75rem 1rem}@media only screen and (min-width: 768px){.login-col[_ngcontent-%COMP%]{border-left:3px solid #8c3b0b}}"]});let d=o;return d})();export{V as RegisterComponent};
